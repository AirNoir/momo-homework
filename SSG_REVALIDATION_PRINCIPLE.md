# ğŸ”„ SSG å³æ™‚æ›´æ–°åŸç†èˆ‡å¯¦ç¾

## ğŸ¯ **å•é¡ŒèƒŒæ™¯**

SSG (éœæ…‹ç«™é»ç”Ÿæˆ) çš„æ ¸å¿ƒç‰¹é»æ˜¯åœ¨**å»ºæ§‹æ™‚æœŸ**ç”Ÿæˆéœæ…‹æ–‡ä»¶ï¼Œé€™å¸¶ä¾†äº†æ¥µå¿«çš„è¼‰å…¥é€Ÿåº¦ï¼Œä½†ä¹Ÿç”¢ç”Ÿäº†ä¸€å€‹å•é¡Œï¼š

âŒ **å…§å®¹æ›´æ–°å•é¡Œï¼š** ç•¶ç·¨è¼¯å™¨ä¸­ä¿®æ”¹äº†å…§å®¹ï¼ŒSSG é é¢ä¸æœƒç«‹å³åæ˜ è®Šæ›´ï¼Œå› ç‚ºå®ƒå€‘æ˜¯é å…ˆç”Ÿæˆçš„éœæ…‹æ–‡ä»¶ã€‚

## ğŸš€ **è§£æ±ºæ–¹æ¡ˆï¼šISR (Incremental Static Regeneration)**

æˆ‘å€‘ä½¿ç”¨ Next.js çš„ **ISR æŠ€è¡“**ä¾†è§£æ±ºé€™å€‹å•é¡Œï¼š

### **1. è‡ªå‹•é‡æ–°é©—è­‰**
```typescript
// åœ¨ SSG é é¢ä¸­è¨­å®š
export const revalidate = 3600; // æ¯å°æ™‚è‡ªå‹•é‡æ–°ç”Ÿæˆ
```

### **2. æ‰‹å‹•é‡æ–°é©—è­‰**
```typescript
// API è·¯ç”±è§¸ç™¼å³æ™‚æ›´æ–°
await fetch(`/api/revalidate?path=/page/${pageId}`, {
  method: 'POST'
});
```

## ğŸ—ï¸ **å¯¦ç¾æ¶æ§‹**

### **1. ç·¨è¼¯å™¨å±¤é¢**
```typescript
// src/app/marketing/[id]/edit/page.tsx

// ä¿å­˜æ™‚è‡ªå‹•è§¸ç™¼é‡æ–°é©—è­‰
const handleSave = async () => {
  await mockUpdateMarketingPageApi(pageId, updateData);
  
  // ğŸ¯ é—œéµï¼šå¦‚æœé é¢å·²ç™¼å¸ƒï¼Œç«‹å³æ›´æ–° SSG
  if (updateData.status === "published") {
    await fetch(`/api/revalidate?path=/page/${pageId}`, {
      method: 'POST'
    });
  }
};
```

### **2. API è·¯ç”±å±¤é¢**
```typescript
// src/app/api/revalidate/route.ts

export async function POST(request: NextRequest) {
  const path = searchParams.get('path');
  
  if (path) {
    // ğŸš€ Next.js å…§å»ºå‡½æ•¸ï¼Œç«‹å³é‡æ–°ç”ŸæˆæŒ‡å®šè·¯å¾‘
    revalidatePath(path);
    return NextResponse.json({ revalidated: true });
  }
}
```

### **3. SSG é é¢å±¤é¢**
```typescript
// src/app/page/[id]/page.tsx

// è¨­å®šè‡ªå‹•é‡æ–°é©—è­‰é–“éš”
export const revalidate = 3600; // 1å°æ™‚

// æ·»åŠ æ¨™ç±¤æ”¯æ´æ‰¹é‡é‡æ–°é©—è­‰
export const tags = ['marketing-pages'];

// ä¼ºæœå™¨ç«¯æ•¸æ“šç²å–
export default async function FrontendPage({ params }) {
  const page = await getMarketingPageServer(params.id);
  // æ¯æ¬¡é‡æ–°é©—è­‰æ™‚éƒ½æœƒé‡æ–°åŸ·è¡Œé€™å€‹å‡½æ•¸
}
```

## ğŸ”„ **ISR å·¥ä½œæµç¨‹**

### **å»ºæ§‹æ™‚æœŸ (Build Time)**
```
1. generateStaticParams() ç”Ÿæˆæ‰€æœ‰é é¢åƒæ•¸
   â†“
2. ç‚ºæ¯å€‹åƒæ•¸é æ¸²æŸ“éœæ…‹é é¢
   â†“
3. ç”Ÿæˆéœæ…‹æ–‡ä»¶å­˜å„²åœ¨ .next/server/
```

### **åŸ·è¡Œæ™‚æœŸ (Runtime)**
```
ç”¨æˆ¶è¨ªå• /page/marketing-1
   â†“
1. Next.js æª¢æŸ¥éœæ…‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”æœªéæœŸ
   â†“
2. å¦‚æœæœ‰æ•ˆ â†’ ç«‹å³è¿”å›éœæ…‹å…§å®¹ âš¡
   â†“
3. å¦‚æœéæœŸ â†’ èƒŒæ™¯é‡æ–°ç”Ÿæˆ + è¿”å›èˆŠå…§å®¹
   â†“
4. ä¸‹æ¬¡è¨ªå•æ™‚è¿”å›æ–°å…§å®¹
```

### **æ‰‹å‹•æ›´æ–°æ™‚æœŸ (Manual Revalidation)**
```
ç·¨è¼¯å™¨ä¿å­˜å…§å®¹
   â†“
1. æ›´æ–°è³‡æ–™åº«/Mock æ•¸æ“š
   â†“
2. èª¿ç”¨ /api/revalidate?path=/page/[id]
   â†“
3. revalidatePath() æ¨™è¨˜é é¢ç‚ºéæœŸ
   â†“
4. ä¸‹æ¬¡è¨ªå•æ™‚ç«‹å³é‡æ–°ç”Ÿæˆ ğŸ”„
```

## ğŸ’¡ **UI å±¤é¢çš„æ”¹é€²**

### **1. ç‹€æ…‹æŒ‡ç¤ºå™¨**
```typescript
// æ ¹æ“šé é¢ç‹€æ…‹é¡¯ç¤ºä¸åŒæç¤º
{formData.status === "published" && "å·²ç™¼å¸ƒ - å¯ç”Ÿæˆ SSG é é¢"}
{formData.status === "draft" && "è‰ç¨¿ç‹€æ…‹ - éœ€ç™¼å¸ƒå¾Œæ‰èƒ½ç”Ÿæˆ SSG"}
```

### **2. å¿«é€Ÿæ“ä½œæŒ‰éˆ•**
```typescript
// æŸ¥çœ‹ SSG é é¢æŒ‰éˆ•
<a href={`/page/${page.id}`} target="_blank">
  æŸ¥çœ‹ SSG é é¢
</a>

// æ‰‹å‹•æ›´æ–° SSG æŒ‰éˆ•
<button onClick={() => fetch(`/api/revalidate?path=/page/${page.id}`)}>
  æ›´æ–° SSG
</button>
```

## ğŸ¯ **é—œéµå„ªå‹¢**

### **1. æ•ˆèƒ½å„ªå‹¢**
- âš¡ **é¦–æ¬¡è¼‰å…¥**ï¼šéœæ…‹æ–‡ä»¶ï¼Œæ¥µå¿«é€Ÿåº¦
- ğŸ”„ **æ›´æ–°éˆæ´»**ï¼šå¯å³æ™‚æ›´æ–°å…§å®¹
- ğŸ’¾ **å¿«å–å‹å–„**ï¼šCDN å’Œç€è¦½å™¨å¿«å–æœ€ä½³åŒ–

### **2. é–‹ç™¼é«”é©—**
- ğŸ¨ **ç·¨è¼¯å™¨é è¦½**ï¼šå³æ™‚çœ‹åˆ°è®Šæ›´
- ğŸŒ **å¯¦éš›é é¢**ï¼šä¸€éµæŸ¥çœ‹ SSG æ•ˆæœ
- ğŸ”„ **æ‰‹å‹•æ§åˆ¶**ï¼šéœ€è¦æ™‚ç«‹å³æ›´æ–°

### **3. SEO å„ªå‹¢**
- ğŸ“ˆ **æœå°‹å¼•æ“å‹å–„**ï¼šå®Œæ•´çš„ HTML å…§å®¹
- ğŸ·ï¸ **å‹•æ…‹ Meta æ¨™ç±¤**ï¼šæ¯å€‹é é¢ç¨ç‰¹çš„ SEO
- ğŸ—ºï¸ **è‡ªå‹• Sitemap**ï¼šæœå°‹å¼•æ“è‡ªå‹•ç™¼ç¾

## ğŸ”§ **å¯¦éš›ä½¿ç”¨æµç¨‹**

### **ç·¨è¼¯å…§å®¹æµç¨‹ï¼š**
```
1. æ‰“é–‹ç·¨è¼¯å™¨ â†’ /marketing/marketing-1/edit
   â†“
2. ä¿®æ”¹å…§å®¹ï¼ˆå³æ™‚é è¦½ï¼‰
   â†“
3. è¨­å®šç‹€æ…‹ç‚º "å·²ç™¼å¸ƒ"
   â†“
4. é»æ“Šä¿å­˜ â†’ è‡ªå‹•è§¸ç™¼ SSG æ›´æ–°
   â†“
5. é»æ“Š "æŸ¥çœ‹ SSG é é¢" â†’ æ–°è¦–çª—é–‹å•Ÿå¯¦éš›é é¢
```

### **ç·Šæ€¥æ›´æ–°æµç¨‹ï¼š**
```
1. ç™¼ç¾ SSG é é¢å…§å®¹æœ‰èª¤
   â†“
2. åœ¨ç·¨è¼¯å™¨ä¸­é»æ“Š "æ›´æ–° SSG"
   â†“
3. ç³»çµ±ç«‹å³é‡æ–°é©—è­‰è©²é é¢
   â†“
4. é‡æ–°æ•´ç† SSG é é¢æŸ¥çœ‹æ›´æ–°
```

## ğŸ“Š **æ•ˆèƒ½å°æ¯”**

| ç­–ç•¥ | é¦–æ¬¡è¼‰å…¥ | å…§å®¹æ›´æ–° | é–‹ç™¼é«”é©— | SEO |
|------|---------|---------|---------|-----|
| ç´” SSG | âš¡âš¡âš¡ | âŒ éœ€é‡æ–°å»ºæ§‹ | â­â­ | âš¡âš¡âš¡ |
| ç´” SSR | âš¡âš¡ | âš¡âš¡âš¡ | â­â­â­ | âš¡âš¡âš¡ |
| ç´” CSR | âš¡ | âš¡âš¡âš¡ | âš¡âš¡âš¡ | âŒ |
| **SSG + ISR** | âš¡âš¡âš¡ | âš¡âš¡âš¡ | âš¡âš¡âš¡ | âš¡âš¡âš¡ |

## ğŸ‰ **çµè«–**

é€šé **ISR (Incremental Static Regeneration)**ï¼Œæˆ‘å€‘å¯¦ç¾äº†ï¼š

âœ… **éœæ…‹é é¢çš„æ¥µé€Ÿè¼‰å…¥**
âœ… **å…§å®¹çš„å³æ™‚æ›´æ–°èƒ½åŠ›**  
âœ… **å„ªç§€çš„é–‹ç™¼è€…é«”é©—**
âœ… **å®Œç¾çš„ SEO æ”¯æ´**

é€™å°±æ˜¯ç¾ä»£ Web é–‹ç™¼çš„æœ€ä½³å¯¦è¸ï¼š**çµåˆéœæ…‹ç”Ÿæˆçš„æ•ˆèƒ½å„ªå‹¢èˆ‡å‹•æ…‹å…§å®¹çš„éˆæ´»æ€§**ï¼

---

## ğŸš€ **æ¸¬è©¦ä½ çš„å¯¦ç¾**

1. **ç·¨è¼¯å…§å®¹** â†’ `/marketing/marketing-1/edit`
2. **ä¿®æ”¹ä¸¦ç™¼å¸ƒ** â†’ è§€å¯Ÿè‡ªå‹• SSG æ›´æ–°
3. **æŸ¥çœ‹ SSG é é¢** â†’ `/page/marketing-1`  
4. **æ‰‹å‹•æ›´æ–°** â†’ æ¸¬è©¦å³æ™‚é‡æ–°é©—è­‰

ä½ çš„ CMS ç³»çµ±ç¾åœ¨å…·å‚™äº†**ç”Ÿç”¢ç´šåˆ¥çš„ SSG + ISR æ¶æ§‹**ï¼ğŸ¯
