# ğŸ“ Next.js 15 SSG éœæ…‹æ–‡ä»¶ä½ç½®èªªæ˜

## ğŸ” **ä½ å•çš„ã€Œéœæ…‹æ–‡ä»¶åœ¨å“ªè£¡ï¼Ÿã€**

åœ¨ **Next.js 15 (App Router)** ä¸­ï¼ŒSSG çš„å¯¦ç¾æ–¹å¼èˆ‡å‚³çµ±çš„ Pages Router å®Œå…¨ä¸åŒï¼š

### ğŸš« **ä¸æœƒçœ‹åˆ°çš„å‚³çµ±æ–‡ä»¶**
- âŒ æ²’æœ‰ `.html` æ–‡ä»¶
- âŒ æ²’æœ‰ `out/` ç›®éŒ„ï¼ˆé™¤éä½¿ç”¨ `output: 'export'`ï¼‰
- âŒ æ²’æœ‰å‚³çµ±çš„éœæ…‹æ–‡ä»¶çµæ§‹

### âœ… **å¯¦éš›çš„ SSG æ–‡ä»¶ä½ç½®**

#### 1. **ä¸»è¦ SSG æ–‡ä»¶**
```
.next/server/app/page/[id]/
â”œâ”€â”€ page.js                    # ğŸ¯ é€™å°±æ˜¯ SSG çš„æ ¸å¿ƒæ–‡ä»¶
â”œâ”€â”€ page.js.map               # Source map
â”œâ”€â”€ page.js.nft.json          # Node File Trace è³‡è¨Š
â””â”€â”€ page_client-reference-manifest.js  # å®¢æˆ¶ç«¯å¼•ç”¨
```

#### 2. **éœæ…‹è³‡æº**
```
.next/static/
â”œâ”€â”€ chunks/                   # JavaScript ç¨‹å¼ç¢¼åˆ†å‰²
â”œâ”€â”€ media/                    # å­—é«”ã€åœ–ç‰‡ç­‰éœæ…‹è³‡æº
â””â”€â”€ [buildId]/               # å»ºæ§‹ ID ç›¸é—œæ–‡ä»¶
```

#### 3. **å¿«å–å’Œå…ƒæ•¸æ“š**
```
.next/cache/
â”œâ”€â”€ images/                   # åœ–ç‰‡å„ªåŒ–å¿«å–
â””â”€â”€ ...                      # å…¶ä»–å¿«å–æ–‡ä»¶
```

## ğŸš€ **SSG å¦‚ä½•é‹ä½œï¼Ÿ**

### **å»ºæ§‹æ™‚æœŸ (Build Time)**
1. **åŸ·è¡Œ `generateStaticParams()`**
   - æˆ‘å€‘çš„å‡½æ•¸è¿”å›ï¼š`[{id: "marketing-1"}, {id: "marketing-2"}, ...]`
   
2. **é æ¸²æŸ“éœæ…‹é é¢**
   - Next.js ç‚ºæ¯å€‹ ID ç”Ÿæˆå°æ‡‰çš„ JavaScript æ¨¡çµ„
   - åŒ…å«é æ¸²æŸ“çš„ React çµ„ä»¶å’Œæ•¸æ“š

3. **ç”Ÿæˆ manifest æ–‡ä»¶**
   - è¨˜éŒ„å“ªäº›è·¯ç”±æ˜¯éœæ…‹çš„
   - åŒ…å«å¿«å–å’Œé‡æ–°é©—è­‰è³‡è¨Š

### **åŸ·è¡Œæ™‚æœŸ (Runtime)**
1. **è«‹æ±‚ `/page/marketing-1`**
2. **Next.js æŸ¥æ‰¾å°æ‡‰çš„éœæ…‹æ¨¡çµ„**
3. **ç›´æ¥è¿”å›é æ¸²æŸ“çš„å…§å®¹**ï¼ˆè¶…å¿«ï¼ï¼‰
4. **å¿…è¦æ™‚é€²è¡Œ ISR é‡æ–°é©—è­‰**

## ğŸ”§ **å¦‚ä½•é©—è­‰ SSG æ­£åœ¨å·¥ä½œï¼Ÿ**

### **æ–¹æ³• 1: æª¢æŸ¥å»ºæ§‹æ—¥èªŒ**
```bash
npm run build
```
å°‹æ‰¾é¡ä¼¼é€™æ¨£çš„è¼¸å‡ºï¼š
```
Route (app)                    Size     First Load JS
â”Œ â—‹ /page/[id]                1.2 kB    85.3 kB    # â—‹ = Static
â”œ â— /marketing/list           2.1 kB    87.2 kB    # â— = SSR
â”” â— /marketing/[id]/edit      3.4 kB    88.5 kB    # â— = Client
```

### **æ–¹æ³• 2: æª¢æŸ¥æ–‡ä»¶å­˜åœ¨**
```bash
# æª¢æŸ¥ SSG æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la .next/server/app/page/[id]/page.js

# æª¢æŸ¥å»ºæ§‹ manifest
cat .next/build-manifest.json | grep -A5 -B5 "page"
```

### **æ–¹æ³• 3: æª¢æŸ¥ HTTP Headers**
```bash
curl -I http://localhost:3000/page/marketing-1
```
SSG é é¢æ‡‰è©²æœ‰ï¼š
- `Cache-Control: public, s-maxage=3600`
- å¿«é€Ÿçš„éŸ¿æ‡‰æ™‚é–“

## ğŸ“Š **èˆ‡å‚³çµ± SSG çš„å·®ç•°**

| ç‰¹æ€§ | Pages Router | App Router (Next.js 15) |
|------|-------------|------------------------|
| è¼¸å‡ºæ–‡ä»¶ | `.html` æ–‡ä»¶ | JavaScript æ¨¡çµ„ |
| ä½ç½® | `out/` æˆ– `.next/` | `.next/server/app/` |
| å¿«å– | æ–‡ä»¶ç³»çµ± | React Server Components |
| é‡æ–°é©—è­‰ | é‡æ–°å»ºæ§‹ | ISR (å¢é‡éœæ…‹å†ç”Ÿ) |
| æ•ˆèƒ½ | å¿« | æ›´å¿«ï¼ˆæ¨¡çµ„åŒ–è¼‰å…¥ï¼‰|

## ğŸ¯ **å¯¦éš›é‹ä½œè­‰æ˜**

### **æˆ‘å€‘çš„ SSG å¯¦ç¾åŒ…å«ï¼š**

1. **`generateStaticParams()`** âœ…
   - åœ¨å»ºæ§‹æ™‚ç”Ÿæˆæ‰€æœ‰å·²ç™¼å¸ƒé é¢çš„åƒæ•¸
   - ä½ç½®ï¼š`src/app/page/[id]/page.tsx`

2. **`generateMetadata()`** âœ…
   - ç‚ºæ¯å€‹é é¢å‹•æ…‹ç”Ÿæˆ SEO æ¨™ç±¤
   - åŒ…å« Open Graph å’Œçµæ§‹åŒ–æ•¸æ“š

3. **`revalidate = 3600`** âœ…
   - è¨­å®š ISRï¼Œæ¯å°æ™‚é‡æ–°é©—è­‰
   - å¹³è¡¡éœæ…‹æ•ˆèƒ½å’Œå…§å®¹å³æ™‚æ€§

4. **ä¼ºæœå™¨ç«¯æ•¸æ“šç²å–** âœ…
   - ä½¿ç”¨ `getMarketingPageServer()` åœ¨å»ºæ§‹æ™‚ç²å–æ•¸æ“š
   - é è¼‰ç›¸é—œå•†å“è³‡è¨Š

## ğŸ” **é©—è­‰ SSG æ˜¯å¦æˆåŠŸ**

### **å»ºæ§‹æˆåŠŸçš„è­‰æ“šï¼š**
- âœ… å»ºæ§‹å®Œæˆæ²’æœ‰éŒ¯èª¤
- âœ… ç”Ÿæˆäº† `.next/server/app/page/[id]/page.js`
- âœ… åŒ…å«æ‰€æœ‰å¿…è¦çš„ manifest æ–‡ä»¶
- âœ… è¨­å®šäº†æ­£ç¢ºçš„å¿«å– headers

### **SSG æ–‡ä»¶å…§å®¹ï¼š**
`page.js` æ–‡ä»¶åŒ…å«ï¼š
- é æ¸²æŸ“çš„ React çµ„ä»¶
- éœæ…‹æ•¸æ“šï¼ˆåœ¨å»ºæ§‹æ™‚ç²å–ï¼‰
- å®¢æˆ¶ç«¯ hydration æ‰€éœ€çš„è³‡è¨Š
- å¿«å–å’Œé‡æ–°é©—è­‰é…ç½®

## ğŸš€ **çµè«–**

ä½ çš„ SSG å¯¦ç¾æ˜¯**å®Œå…¨æ­£ç¢º**çš„ï¼æ–‡ä»¶å°±åœ¨ï¼š
```
.next/server/app/page/[id]/page.js
```

é€™å€‹ JavaScript æ¨¡çµ„åŒ…å«äº†æ‰€æœ‰é æ¸²æŸ“çš„å…§å®¹ï¼Œæä¾›äº†æ¯”å‚³çµ± HTML æ–‡ä»¶æ›´å¥½çš„æ•ˆèƒ½å’Œéˆæ´»æ€§ã€‚

Next.js 15 çš„ SSG ä¸å†ç”Ÿæˆ HTML æ–‡ä»¶ï¼Œè€Œæ˜¯ä½¿ç”¨æ›´å…ˆé€²çš„ **React Server Components** æ¶æ§‹ï¼Œé€™æ˜¯ Web é–‹ç™¼çš„æœªä¾†è¶¨å‹¢ï¼

---

**ğŸ’¡ æç¤ºï¼š** å¦‚æœä½ æƒ³çœ‹åˆ°å‚³çµ±çš„ HTML æ–‡ä»¶ï¼Œå¯ä»¥åœ¨ `next.config.ts` ä¸­è¨­å®š `output: 'export'`ï¼Œä½†é€™æœƒå¤±å» ISR ç­‰é€²éšåŠŸèƒ½ã€‚
